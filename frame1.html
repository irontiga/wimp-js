<html>
    <head>
    
    </head>
    <body>
        
        
        <script src="wimp.js"></script>
        <script type="text/javascript">
            Wimp.init();
            Wimp.proxy = true;
            
            const w = new Wimp(window.parent);
            
            setTimeout(() => {
                w.request("hello").then(response => {
                    console.log(response);
                })
                
                w.request("hello22", response => {
                    console.log("YAY", response);
                })
            },1000)
            console.log(w);
            
            w.request("jj", response => {
                console.log(response);
            })
            
            
            setTimeout(()=>{
                console.log("time");
                wProxy = new Wimp("popup", window.parent);
                console.log(wProxy);
                wProxy.request("high", response => {
                    console.log(response);
                });
                
                wProxy.request("high").then(response => {
                    console.log("PROM IS TOMOROW", response);
                });
            }, 4000)
            
            
            
            streamListenWimp = new Wimp(window.parent).listen("balance", (data) => {
                console.log("Listened for balance of " + data);
            })
            
            setTimeout(() => {
                proxyStreamListenWimp = new Wimp("popup", window.parent).listen("time", data => {
                    console.log("It's " + data)
                })
            }, 1000)
        </script>
    </body>
</html>