<html>
    <head>
    
    </head>
    <body>
        
        
        <script src="wimp.js"></script>
        <script type="text/javascript">
            console.log("2222");
            Wimp.init();
            Wimp.proxy = true;

            const p = new Wimp(window.opener);
            console.log(window.opener);
            console.log(p);
            
            setTimeout(() => {
                p.request("hello22", response => {
                    console.log("YAY", response);
                })
            }, 1500);
            
            p.on("high", {data:"kiteGang"}, (req,res) => {
                console.log(req);
                res("High as a kite");
            })
            
            
            streamWimp = new Wimp("*").createStream("time", (data, res) => {
                res(new Date().getTime());
            })
            setInterval(()=> {
                streamWimp.emit(new Date().getTime())
            },1000)
            console.log(streamWimp);
        </script>
    </body>
</html>